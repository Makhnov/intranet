function whatTheHell(){const e=document.querySelectorAll(".logo-pochoir.right");e.length>0&&iconColors(e);const t=document.querySelector("ul.profile > .avatar");t&&t.addEventListener("click",(e=>t.closest("ul").classList.toggle("cgs-open")));const c=document.querySelectorAll(".cgs-expandable");c.length>0&&expandableImages(c);const n=document.querySelectorAll(".cgs-preview");n.length>0&&preview(n);const s=document.querySelectorAll(".cgs-swap");s.length>0&&swap(s);const o=document.querySelector("footer nav.footer ul.nav-box");o&&footerScroll(o);const d=document.getElementById("searchColumn");d&&VerticalWave(d);const l=document.querySelector("cgs-search");l&&searchBar(l);const i=document.querySelector("#searchColumn form");i&&searchBlock(i);const a=document.querySelectorAll(".cgs-message");a.length>0&&cgsMessages(a);const r=document.getElementById("update-block"),g=document.getElementById("profile-block");r&&g&&profileUpdate(r,g)}function cgsMessages(e){e.forEach((e=>{const t=e.querySelector(".msg-close");t&&t.addEventListener("click",(()=>e.remove()))}))}function iconColors(e){const t=["#008770","#00b3be","#92d400","#928b81"],c=e=>{document.documentElement.style.setProperty("--cgs-theme-primary",e),localStorage.setItem("selectedColor",e)},n=localStorage.getItem("selectedColor");n&&c(n),e.forEach(((e,n)=>{e.addEventListener("click",(e=>{e.preventDefault(),c(t[n])}))}))}function expandableImages(e){e.forEach((e=>{e.addEventListener("click",(function(){const e=document.createElement("div");e.classList.add("cgs-fullscreen-container");const t=this.cloneNode();e.appendChild(t),document.body.appendChild(e),e.addEventListener("click",(function(){this.remove()}))}))}))}function preview(e){e.forEach((e=>{e.addEventListener("click",(function(){const t=e.closest("li.list-item").querySelector("div.list-preview");t&&(t.classList.remove("cgs-hidden"),t.addEventListener("click",(function(){t.classList.add("cgs-hidden")})))}))}))}function swap(e){function t(e=!1,t=!1,c){e?t?c.classList.toggle("cgs-width-none"):c.classList.toggle("cgs-height-none"):c.classList.toggle("cgs-hidden")}for(const c of e){const e=c.querySelector(".cgs-swapable"),n=e.querySelectorAll("svg, img"),s=c.querySelector("p.cgs-heading"),o=n[0],d=n[1],l=e.getAttribute("data-smooth"),i=e.getAttribute("data-width");"Masquer"==e.title?o.classList.add("cgs-hidden"):d.classList.add("cgs-hidden");let a=c.nextElementSibling;for(;a;){if(a.classList.contains("cgs-swap-visible")){a.classList.remove("cgs-swap-visible"),c.classList.add("cgs-open");break}if(a.classList.contains("cgs-swap-hidden")){a.classList.remove("cgs-swap-hidden"),c.classList.remove("cgs-open"),t(l,i,a);break}a=a.nextElementSibling}e.addEventListener("click",(function(){if(o.classList.toggle("cgs-hidden"),d.classList.toggle("cgs-hidden"),c.classList.toggle("cgs-open"),t(l,i,a),"Afficher"===e.getAttribute("title")){if(e.setAttribute("title","Masquer"),s){const e=s.textContent.replace("Afficher","Masquer");s.textContent=e}}else if(e.setAttribute("title","Afficher"),s){const e=s.textContent.replace("Masquer","Afficher");s.textContent=e}}))}}function footerScroll(e){const t=getComputedStyle(document.body),c=document.querySelector("footer nav.footer div.cgs-box.left"),n=document.querySelector("footer nav.footer div.cgs-box.right"),s=32*(1.5*parseFloat(t.getPropertyValue("--nav-icon-margin"))+parseFloat(t.getPropertyValue("--nav-icon-size"))),o=()=>{0===e.scrollLeft?c.classList.add("cgs-hidden"):c.classList.remove("cgs-hidden"),e.scrollLeft+e.offsetWidth>=e.scrollWidth?n.classList.add("cgs-hidden"):n.classList.remove("cgs-hidden")};c.addEventListener("click",(()=>{e.scrollLeft-=s})),n.addEventListener("click",(()=>{e.scrollLeft+=s})),e.addEventListener("scroll",o);const d=localStorage.getItem("footerScrollPosition");null!==d&&(e.scrollLeft=parseInt(d)),o(),window.addEventListener("resize",o),window.addEventListener("beforeunload",(()=>{localStorage.setItem("footerScrollPosition",e.scrollLeft)}))}function VerticalWave(e){console.log("VerticalWave");new ResizeObserver((function(){console.log("WaveForm",e);const t=e.offsetWidth,c=e.offsetHeight,n=1.075/(160/t),s=1/(800/c);document.documentElement.style.setProperty("--courbure-scaling-x",s),document.documentElement.style.setProperty("--courbure-scaling-y",n)})).observe(e)}function searchBar(e){searchButtons=e.children;const t=searchButtons[0],c=searchButtons[1],n=searchButtons[2],s=document.querySelector("cgs-search > form > input");t.addEventListener("click",(()=>{t.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),s.classList.add("cgs-open"),e.classList.add("cgs-open")})),c.addEventListener("click",(()=>{c.classList.add("cgs-hidden"),n.classList.remove("cgs-hidden"),s.classList.remove("cgs-open"),e.classList.remove("cgs-open")})),n.addEventListener("click",(()=>{n.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),s.classList.add("cgs-open"),e.classList.add("cgs-open")})),s.addEventListener("focus",(()=>{s.classList.add("cgs-open"),t.classList.add("cgs-hidden"),n.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),e.classList.add("cgs-open")}))}function searchBlock(e){const t=new URLSearchParams(window.location.search),c=document.getElementById("activeCategory"),n=c.getAttribute("data-name"),s=t.get(n),o=document.querySelectorAll(`input[name="${n}"]`),d=c.getAttribute("data-nom"),l=document.getElementById("activeExtension"),i=t.get("extension"),a=document.querySelectorAll('input[name="extension"]'),r=t.getAll("tag"),g=t.get("query"),u=[t.get("start_date"),t.get("end_date")],m=document.querySelectorAll(".tag-button"),h=document.getElementById("cgs-search-form"),p=document.getElementById("activeTags"),f=document.getElementById("activeQuery"),v=document.getElementById("activeDate"),L=document.querySelector("fieldset.recherche .filter_search");if(o&&o.forEach((e=>{e.addEventListener("change",(function(){y()}))})),a&&a.forEach((e=>{e.addEventListener("change",(function(){y()}))})),L.addEventListener("click",(function(){y()})),m&&m.forEach((e=>{e.addEventListener("click",(function(){E(this.getAttribute("data-tag")),y()}))})),s||i||r.length>0||g||u[0]||u[1]){if(s){console.log("CATEGORIE: ",s);const e=document.createElement("div"),t=document.querySelector("#cgs-close svg").cloneNode(!0),n=document.createElement("span");t.id="svg_close_categorie",t.classList.add("cgs-mid-icon","cgs-close"),t.onclick=function(){o.forEach((e=>{e.checked=!1})),i||a.forEach((e=>{e.checked=!1})),y()},n.textContent=`${d} : ${s}`,e.appendChild(n),e.appendChild(t),c.appendChild(e)}if(i){console.log("EXTENSION: ",i);const e=document.createElement("div"),t=document.createElement("span"),c=document.querySelector("#cgs-close svg").cloneNode(!0);c.id="svg_close_extension",c.classList.add("cgs-mid-icon","cgs-close"),c.onclick=function(){a.forEach((e=>{e.checked=!1})),s||o.forEach((e=>{e.checked=!1})),y()},t.textContent=`Fichier : ${i.split("_")[0]}`,e.appendChild(t),e.appendChild(c),l.appendChild(e)}if(g){const e=document.createElement("div"),t=document.querySelector("#cgs-close svg").cloneNode(!0),c=document.createElement("span");t.id="svg_close_query",t.classList.add("cgs-mid-icon","cgs-close"),t.onclick=function(){const e=document.querySelector('input[name="query"]');e.value="",console.log(e.value),y()},c.textContent=`Recherche : ${g}`,e.appendChild(c),e.appendChild(t),f.appendChild(e)}if(r.length>0&&r.forEach((e=>E(e))),u[0]){const e=document.createElement("div"),t=document.createElement("span"),c=document.querySelector("#cgs-close svg").cloneNode(!0);c.id="svg_close_start_date",c.classList.add("cgs-mid-icon","cgs-close"),c.onclick=function(){document.querySelector('input[name="start_date"]').value="",y()},t.textContent=`D√©but : ${u[0]}`,e.appendChild(t),e.appendChild(c),v.appendChild(e)}if(u[1]){const e=document.createElement("div"),t=document.createElement("span"),c=document.querySelector("#cgs-close svg").cloneNode(!0);c.id="svg_close_end_date",c.classList.add("cgs-mid-icon","cgs-close"),c.onclick=function(){document.querySelector('input[name="end_date"]').value="",y()},t.textContent=`Fin : ${u[1]}`,e.appendChild(t),e.appendChild(c),v.appendChild(e)}}function E(e){if(![...p.children].some((t=>t.textContent.startsWith(e)))){const t=document.createElement("input");t.type="hidden",t.name="tag",t.value=e,h.appendChild(t);const c=document.createElement("div");c.className="active-tag-div";const n=document.createElement("span");n.textContent=e;const s=document.querySelector("#cgs-close svg").cloneNode(!0);s.id="svg_close_"+e,s.classList.add("cgs-mid-icon","cgs-close"),s.onclick=function(){h.removeChild(t),p.removeChild(c),y()},c.appendChild(n),c.appendChild(s),p.appendChild(c)}}function y(){h.submit()}}function profileUpdate(e,t){const c=window.location.search;"true"===new URLSearchParams(c).get("form")?(e.classList.remove("cgs-hidden"),t.classList.add("cgs-hidden"),avatarToggle()):(e.classList.add("cgs-hidden"),t.classList.remove("cgs-hidden"),avatarToggle())}function avatarToggle(){const e=document.getElementById("clear_avatar"),t=document.getElementById("preview_avatar");e&&t&&e.addEventListener("click",(function(){const c=t.getAttribute("data-default"),n=t.getAttribute("data-current");console.log(e.checked),e.checked?c===n?(alert("üö´ Vous utilisez d√©j√† l'avatar par d√©faut, il n'y a rien √† r√©initialiser."),e.checked=!1):t.src=c:t.src=n}))}document.addEventListener("DOMContentLoaded",(function(){console.log("Fichier intranet.js charg√©"),whatTheHell()}));