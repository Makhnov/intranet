function whatTheHell(){const e=document.querySelectorAll(".logo-pochoir.right");e.length>0&&iconColors(e);const t=document.querySelector("ul.profile > .avatar");t&&t.addEventListener("click",(e=>t.closest("ul").classList.toggle("cgs-open")));const c=document.querySelectorAll(".cgs-expandable");c.length>0&&expandableImages(c);const n=document.querySelectorAll(".cgs-swap");n.length>0&&swap(n);const s=document.querySelector("footer nav.footer ul.nav-box");s&&footerScroll(s);const o=document.getElementById("searchColumn");o&&VerticalWave(o);const l=document.querySelectorAll("cgs-search > svg, cgs-search > img");3===l.length&&searchBar(l);const d=document.querySelector("#searchColumn form");d&&searchBlock(d)}function iconColors(e){const t=["#008770","#00b3be","#92d400","#928b81"],c=e=>{document.documentElement.style.setProperty("--cgs-theme-primary",e),localStorage.setItem("selectedColor",e)},n=localStorage.getItem("selectedColor");n&&c(n),e.forEach(((e,n)=>{e.addEventListener("click",(e=>{e.preventDefault(),c(t[n])}))}))}function expandableImages(e){e.forEach((e=>{e.addEventListener("click",(function(){const e=document.createElement("div");e.classList.add("cgs-fullscreen-container");const t=this.cloneNode();e.appendChild(t),document.body.appendChild(e),e.addEventListener("click",(function(){this.remove()}))}))}))}function swap(e){function t(e=!1,t=!1,c){e?t?c.classList.toggle("cgs-width-none"):c.classList.toggle("cgs-height-none"):c.classList.toggle("cgs-hidden")}for(const c of e){const e=c.querySelector(".cgs-swapable"),n=e.querySelectorAll("svg, img"),s=c.querySelector("p.cgs-heading"),o=n[0],l=n[1],d=e.getAttribute("data-smooth"),a=e.getAttribute("data-width");"Masquer"==e.title?o.classList.add("cgs-hidden"):l.classList.add("cgs-hidden");let i=c.nextElementSibling;for(;i;){if(i.classList.contains("cgs-swap-visible")){i.classList.remove("cgs-swap-visible");break}if(i.classList.contains("cgs-swap-hidden")){i.classList.remove("cgs-swap-hidden"),t(d,a,i);break}i=i.nextElementSibling}e.addEventListener("click",(function(){if(o.classList.toggle("cgs-hidden"),l.classList.toggle("cgs-hidden"),t(d,a,i),"Afficher"===e.getAttribute("title")){if(e.setAttribute("title","Masquer"),s){const e=s.textContent.replace("Afficher","Masquer");s.textContent=e}}else if(e.setAttribute("title","Afficher"),s){const e=s.textContent.replace("Masquer","Afficher");s.textContent=e}}))}}function footerScroll(e){const t=getComputedStyle(document.body),c=document.querySelector("footer nav.footer div.cgs-box.left"),n=document.querySelector("footer nav.footer div.cgs-box.right"),s=32*(1.5*parseFloat(t.getPropertyValue("--nav-icon-margin"))+parseFloat(t.getPropertyValue("--nav-icon-size"))),o=()=>{0===e.scrollLeft?c.classList.add("cgs-hidden"):c.classList.remove("cgs-hidden"),e.scrollLeft+e.offsetWidth>=e.scrollWidth?n.classList.add("cgs-hidden"):n.classList.remove("cgs-hidden")};c.addEventListener("click",(()=>{e.scrollLeft-=s})),n.addEventListener("click",(()=>{e.scrollLeft+=s})),e.addEventListener("scroll",o);const l=localStorage.getItem("footerScrollPosition");null!==l&&(e.scrollLeft=parseInt(l)),o(),window.addEventListener("resize",o),window.addEventListener("beforeunload",(()=>{localStorage.setItem("footerScrollPosition",e.scrollLeft)}))}function VerticalWave(e){new ResizeObserver((function(){const t=e.offsetWidth,c=e.offsetHeight,n=1.1/(160/t),s=1/(800/c);document.documentElement.style.setProperty("--courbure-scaling-x",s),document.documentElement.style.setProperty("--courbure-scaling-y",n)})).observe(e)}function searchBar(e){const t=e[0],c=e[1],n=e[2],s=document.querySelector("cgs-search > form > input");t.addEventListener("click",(()=>{t.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),s.classList.add("cgs-open")})),c.addEventListener("click",(()=>{c.classList.add("cgs-hidden"),n.classList.remove("cgs-hidden"),s.classList.remove("cgs-open")})),n.addEventListener("click",(()=>{n.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),s.classList.add("cgs-open")})),s.addEventListener("focus",(()=>{s.classList.add("cgs-open"),t.classList.add("cgs-hidden"),n.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden")}))}function searchBlock(e){const t=new URLSearchParams(window.location.search),c=document.getElementById("activeCategory"),n=c.getAttribute("data-name"),s=t.get(n),o=document.querySelectorAll(`input[name="${n}"]`),l=t.getAll("tag"),d=t.get("query"),a=[t.get("start_date"),t.get("end_date")],i=c.getAttribute("data-nom"),r=document.querySelectorAll(".tag-button"),u=document.getElementById("cgs-search-form"),g=document.getElementById("activeTags"),m=document.getElementById("activeQuery"),h=document.getElementById("activeDate");if(o&&o.forEach((e=>{e.addEventListener("change",(function(){f()}))})),r&&r.forEach((e=>{e.addEventListener("click",(function(){p(this.getAttribute("data-tag")),f()}))})),console.log("Category :",s,"Tags :",l,"Query :",d,"Date :",a),s||l.length>0||d||a[0]||a[1]){if(s){const e=document.createElement("div"),t=document.querySelector("#cgs-close svg").cloneNode(!0),n=document.createElement("span");t.id="svg_close_categorie",t.classList.add("cgs-small-icon","cgs-close"),t.onclick=function(){o.forEach((e=>{e.checked=!1})),f()},n.textContent=`${i} : ${s}`,e.appendChild(n),e.appendChild(t),c.appendChild(e)}else{console.log("ELSE");const e=document.createElement("div"),t=document.createElement("span");t.textContent=`${i} : Toutes`,e.appendChild(t),c.appendChild(e)}if(d){const e=document.createElement("div"),t=document.querySelector("#cgs-close svg").cloneNode(!0),c=document.createElement("span");t.id="svg_close_query",t.classList.add("cgs-small-icon","cgs-close"),t.onclick=function(){const e=document.querySelector('input[name="query"]');e.value="",console.log(e.value),f()},c.textContent=`Recherche : ${d}`,e.appendChild(c),e.appendChild(t),m.appendChild(e)}if(l.length>0&&l.forEach((e=>p(e))),a[0]){const e=document.createElement("div"),t=document.createElement("span"),c=document.querySelector("#cgs-close svg").cloneNode(!0);c.id="svg_close_start_date",c.classList.add("cgs-small-icon","cgs-close"),c.onclick=function(){document.querySelector('input[name="start_date"]').value="",f()},t.textContent=`Début : ${a[0]}`,e.appendChild(t),e.appendChild(c),h.appendChild(e)}if(a[1]){const e=document.createElement("div"),t=document.createElement("span"),c=document.querySelector("#cgs-close svg").cloneNode(!0);c.id="svg_close_end_date",c.classList.add("cgs-small-icon","cgs-close"),c.onclick=function(){document.querySelector('input[name="end_date"]').value="",f()},t.textContent=`Fin : ${a[1]}`,e.appendChild(t),e.appendChild(c),h.appendChild(e)}}function p(e){if(![...g.children].some((t=>t.textContent.startsWith(e)))){const t=document.createElement("input");t.type="hidden",t.name="tag",t.value=e,u.appendChild(t);const c=document.createElement("div");c.className="active-tag-div";const n=document.createElement("span");n.textContent=e;const s=document.querySelector("#cgs-close svg").cloneNode(!0);s.id="svg_close_"+e,s.classList.add("cgs-small-icon","cgs-close"),s.onclick=function(){u.removeChild(t),g.removeChild(c),f()},c.appendChild(n),c.appendChild(s),g.appendChild(c)}}function f(){u.submit()}}document.addEventListener("DOMContentLoaded",(function(){console.log("Fichier intranet.js chargé"),whatTheHell()}));