function whatTheHell(){const e=document.querySelectorAll(".logo-pochoir.right");e.length>0&&iconColors(e);const t=document.querySelector("ul.profile > .avatar");t&&t.addEventListener("click",(e=>t.closest("ul").classList.toggle("cgs-open")));const c=document.querySelectorAll(".cgs-expandable");c.length>0&&expandableImages(c);const n=document.querySelectorAll(".cgs-swap");n.length>0&&swap(n);const s=document.querySelector("footer nav.footer ul.nav-box");s&&footerScroll(s);const o=document.getElementById("searchColumn");o&&VerticalWave(o);const l=document.querySelector("cgs-search");l&&searchBar(l);const d=document.querySelector("#searchColumn form");d&&searchBlock(d);const a=document.querySelectorAll(".cgs-message");a.length>0&&cgsMessages(a);const i=document.getElementById("update-block"),r=document.getElementById("profile-block");i&&r&&profileUpdate(i,r)}function cgsMessages(e){e.forEach((e=>{const t=e.querySelector(".msg-close");t&&t.addEventListener("click",(()=>e.remove()))}))}function iconColors(e){const t=["#008770","#00b3be","#92d400","#928b81"],c=e=>{document.documentElement.style.setProperty("--cgs-theme-primary",e),localStorage.setItem("selectedColor",e)},n=localStorage.getItem("selectedColor");n&&c(n),e.forEach(((e,n)=>{e.addEventListener("click",(e=>{e.preventDefault(),c(t[n])}))}))}function expandableImages(e){e.forEach((e=>{e.addEventListener("click",(function(){const e=document.createElement("div");e.classList.add("cgs-fullscreen-container");const t=this.cloneNode();e.appendChild(t),document.body.appendChild(e),e.addEventListener("click",(function(){this.remove()}))}))}))}function swap(e){function t(e=!1,t=!1,c){e?t?c.classList.toggle("cgs-width-none"):c.classList.toggle("cgs-height-none"):c.classList.toggle("cgs-hidden")}for(const c of e){const e=c.querySelector(".cgs-swapable"),n=e.querySelectorAll("svg, img"),s=c.querySelector("p.cgs-heading"),o=n[0],l=n[1],d=e.getAttribute("data-smooth"),a=e.getAttribute("data-width");"Masquer"==e.title?o.classList.add("cgs-hidden"):l.classList.add("cgs-hidden");let i=c.nextElementSibling;for(;i;){if(i.classList.contains("cgs-swap-visible")){i.classList.remove("cgs-swap-visible");break}if(i.classList.contains("cgs-swap-hidden")){i.classList.remove("cgs-swap-hidden"),t(d,a,i);break}i=i.nextElementSibling}e.addEventListener("click",(function(){if(o.classList.toggle("cgs-hidden"),l.classList.toggle("cgs-hidden"),t(d,a,i),"Afficher"===e.getAttribute("title")){if(e.setAttribute("title","Masquer"),s){const e=s.textContent.replace("Afficher","Masquer");s.textContent=e}}else if(e.setAttribute("title","Afficher"),s){const e=s.textContent.replace("Masquer","Afficher");s.textContent=e}}))}}function footerScroll(e){const t=getComputedStyle(document.body),c=document.querySelector("footer nav.footer div.cgs-box.left"),n=document.querySelector("footer nav.footer div.cgs-box.right"),s=32*(1.5*parseFloat(t.getPropertyValue("--nav-icon-margin"))+parseFloat(t.getPropertyValue("--nav-icon-size"))),o=()=>{0===e.scrollLeft?c.classList.add("cgs-hidden"):c.classList.remove("cgs-hidden"),e.scrollLeft+e.offsetWidth>=e.scrollWidth?n.classList.add("cgs-hidden"):n.classList.remove("cgs-hidden")};c.addEventListener("click",(()=>{e.scrollLeft-=s})),n.addEventListener("click",(()=>{e.scrollLeft+=s})),e.addEventListener("scroll",o);const l=localStorage.getItem("footerScrollPosition");null!==l&&(e.scrollLeft=parseInt(l)),o(),window.addEventListener("resize",o),window.addEventListener("beforeunload",(()=>{localStorage.setItem("footerScrollPosition",e.scrollLeft)}))}function VerticalWave(e){new ResizeObserver((function(){const t=e.offsetWidth,c=e.offsetHeight,n=1.1/(160/t),s=1/(800/c);document.documentElement.style.setProperty("--courbure-scaling-x",s),document.documentElement.style.setProperty("--courbure-scaling-y",n)})).observe(e)}function searchBar(e){searchButtons=e.children;const t=searchButtons[0],c=searchButtons[1],n=searchButtons[2],s=document.querySelector("cgs-search > form > input");t.addEventListener("click",(()=>{t.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),s.classList.add("cgs-open"),e.classList.add("cgs-open")})),c.addEventListener("click",(()=>{c.classList.add("cgs-hidden"),n.classList.remove("cgs-hidden"),s.classList.remove("cgs-open"),e.classList.remove("cgs-open")})),n.addEventListener("click",(()=>{n.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),s.classList.add("cgs-open"),e.classList.add("cgs-open")})),s.addEventListener("focus",(()=>{s.classList.add("cgs-open"),t.classList.add("cgs-hidden"),n.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),e.classList.add("cgs-open")}))}function searchBlock(e){const t=new URLSearchParams(window.location.search),c=document.getElementById("activeCategory"),n=c.getAttribute("data-name"),s=t.get(n),o=document.querySelectorAll(`input[name="${n}"]`),l=c.getAttribute("data-nom"),d=document.getElementById("activeExtension"),a=t.get("extension"),i=document.querySelectorAll('input[name="extension"]'),r=t.getAll("tag"),u=t.get("query"),g=[t.get("start_date"),t.get("end_date")],m=document.querySelectorAll(".tag-button"),h=document.getElementById("cgs-search-form"),p=document.getElementById("activeTags"),f=document.getElementById("activeQuery"),v=document.getElementById("activeDate");if(o&&o.forEach((e=>{e.addEventListener("change",(function(){E()}))})),i&&i.forEach((e=>{e.addEventListener("change",(function(){E()}))})),m&&m.forEach((e=>{e.addEventListener("click",(function(){L(this.getAttribute("data-tag")),E()}))})),console.log("Category :",s,"Tags :",r,"Query :",u,"Date :",g,"Extension :",a),s||a||r.length>0||u||g[0]||g[1]){if(s){const e=document.createElement("div"),t=document.querySelector("#cgs-close svg").cloneNode(!0),n=document.createElement("span");t.id="svg_close_categorie",t.classList.add("cgs-small-icon","cgs-close"),t.onclick=function(){o.forEach((e=>{e.checked=!1})),E()},n.textContent=`${l} : ${s}`,e.appendChild(n),e.appendChild(t),c.appendChild(e)}else{console.log("ELSE");const e=document.createElement("div"),t=document.createElement("span");t.textContent=`${l} : Toutes`,e.appendChild(t),c.appendChild(e)}if(a){const e="Fichier",t=document.createElement("div"),c=document.createElement("span"),n=document.querySelector("#cgs-close svg").cloneNode(!0);n.id="svg_close_extension",n.classList.add("cgs-small-icon","cgs-close"),n.onclick=function(){i.forEach((e=>{e.checked=!1})),E()},c.textContent=`${e} : ${a.split("_")[0]}`,t.appendChild(c),t.appendChild(n),d.appendChild(t)}else{const e=document.createElement("div"),t=document.createElement("span");t.textContent=`${label} : Toutes`,e.appendChild(t),d.appendChild(e)}if(u){const e=document.createElement("div"),t=document.querySelector("#cgs-close svg").cloneNode(!0),c=document.createElement("span");t.id="svg_close_query",t.classList.add("cgs-small-icon","cgs-close"),t.onclick=function(){const e=document.querySelector('input[name="query"]');e.value="",console.log(e.value),E()},c.textContent=`Recherche : ${u}`,e.appendChild(c),e.appendChild(t),f.appendChild(e)}if(r.length>0&&r.forEach((e=>L(e))),g[0]){const e=document.createElement("div"),t=document.createElement("span"),c=document.querySelector("#cgs-close svg").cloneNode(!0);c.id="svg_close_start_date",c.classList.add("cgs-small-icon","cgs-close"),c.onclick=function(){document.querySelector('input[name="start_date"]').value="",E()},t.textContent=`D√©but : ${g[0]}`,e.appendChild(t),e.appendChild(c),v.appendChild(e)}if(g[1]){const e=document.createElement("div"),t=document.createElement("span"),c=document.querySelector("#cgs-close svg").cloneNode(!0);c.id="svg_close_end_date",c.classList.add("cgs-small-icon","cgs-close"),c.onclick=function(){document.querySelector('input[name="end_date"]').value="",E()},t.textContent=`Fin : ${g[1]}`,e.appendChild(t),e.appendChild(c),v.appendChild(e)}}function L(e){if(![...p.children].some((t=>t.textContent.startsWith(e)))){const t=document.createElement("input");t.type="hidden",t.name="tag",t.value=e,h.appendChild(t);const c=document.createElement("div");c.className="active-tag-div";const n=document.createElement("span");n.textContent=e;const s=document.querySelector("#cgs-close svg").cloneNode(!0);s.id="svg_close_"+e,s.classList.add("cgs-small-icon","cgs-close"),s.onclick=function(){h.removeChild(t),p.removeChild(c),E()},c.appendChild(n),c.appendChild(s),p.appendChild(c)}}function E(){h.submit()}}function profileUpdate(e,t){const c=window.location.search;"true"===new URLSearchParams(c).get("form")?(e.classList.remove("cgs-hidden"),t.classList.add("cgs-hidden"),avatarToggle()):(e.classList.add("cgs-hidden"),t.classList.remove("cgs-hidden"),avatarToggle())}function avatarToggle(){const e=document.getElementById("clear_avatar"),t=document.getElementById("preview_avatar");e&&t&&e.addEventListener("click",(function(){const c=t.getAttribute("data-default"),n=t.getAttribute("data-current");console.log(e.checked),e.checked?c===n?(alert("üö´ Vous utilisez d√©j√† l'avatar par d√©faut, il n'y a rien √† r√©initialiser."),e.checked=!1):t.src=c:t.src=n}))}document.addEventListener("DOMContentLoaded",(function(){console.log("Fichier intranet.js charg√©"),whatTheHell()}));