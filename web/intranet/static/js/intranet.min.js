function whatTheHell(){const e=document.querySelectorAll(".logo-pochoir.right");e.length>0&&iconColors(e);const t=document.querySelector("ul.profile > .avatar");t&&t.addEventListener("click",(e=>t.closest("ul").classList.toggle("cgs-open")));const c=document.querySelectorAll(".cgs-expandable");c.length>0&&expandableImages(c);const s=document.querySelectorAll(".cgs-swap");s.length>0&&swap(s);const n=document.querySelector("footer nav.footer ul.nav-box");n&&footerScroll(n);const o=document.getElementById("searchColumn");o&&VerticalWave(o);const l=document.querySelector("cgs-search");l&&searchBar(l);const d=document.querySelector("#searchColumn form");d&&searchBlock(d);const a=document.querySelectorAll(".cgs-message");a.length>0&&cgsMessages(a)}function cgsMessages(e){e.forEach((e=>{const t=e.querySelector(".msg-close");t&&t.addEventListener("click",(()=>e.remove()))}))}function iconColors(e){const t=["#008770","#00b3be","#92d400","#928b81"],c=e=>{document.documentElement.style.setProperty("--cgs-theme-primary",e),localStorage.setItem("selectedColor",e)},s=localStorage.getItem("selectedColor");s&&c(s),e.forEach(((e,s)=>{e.addEventListener("click",(e=>{e.preventDefault(),c(t[s])}))}))}function expandableImages(e){e.forEach((e=>{e.addEventListener("click",(function(){const e=document.createElement("div");e.classList.add("cgs-fullscreen-container");const t=this.cloneNode();e.appendChild(t),document.body.appendChild(e),e.addEventListener("click",(function(){this.remove()}))}))}))}function swap(e){function t(e=!1,t=!1,c){e?t?c.classList.toggle("cgs-width-none"):c.classList.toggle("cgs-height-none"):c.classList.toggle("cgs-hidden")}for(const c of e){const e=c.querySelector(".cgs-swapable"),s=e.querySelectorAll("svg, img"),n=c.querySelector("p.cgs-heading"),o=s[0],l=s[1],d=e.getAttribute("data-smooth"),a=e.getAttribute("data-width");"Masquer"==e.title?o.classList.add("cgs-hidden"):l.classList.add("cgs-hidden");let i=c.nextElementSibling;for(;i;){if(i.classList.contains("cgs-swap-visible")){i.classList.remove("cgs-swap-visible");break}if(i.classList.contains("cgs-swap-hidden")){i.classList.remove("cgs-swap-hidden"),t(d,a,i);break}i=i.nextElementSibling}e.addEventListener("click",(function(){if(o.classList.toggle("cgs-hidden"),l.classList.toggle("cgs-hidden"),t(d,a,i),"Afficher"===e.getAttribute("title")){if(e.setAttribute("title","Masquer"),n){const e=n.textContent.replace("Afficher","Masquer");n.textContent=e}}else if(e.setAttribute("title","Afficher"),n){const e=n.textContent.replace("Masquer","Afficher");n.textContent=e}}))}}function footerScroll(e){const t=getComputedStyle(document.body),c=document.querySelector("footer nav.footer div.cgs-box.left"),s=document.querySelector("footer nav.footer div.cgs-box.right"),n=32*(1.5*parseFloat(t.getPropertyValue("--nav-icon-margin"))+parseFloat(t.getPropertyValue("--nav-icon-size"))),o=()=>{0===e.scrollLeft?c.classList.add("cgs-hidden"):c.classList.remove("cgs-hidden"),e.scrollLeft+e.offsetWidth>=e.scrollWidth?s.classList.add("cgs-hidden"):s.classList.remove("cgs-hidden")};c.addEventListener("click",(()=>{e.scrollLeft-=n})),s.addEventListener("click",(()=>{e.scrollLeft+=n})),e.addEventListener("scroll",o);const l=localStorage.getItem("footerScrollPosition");null!==l&&(e.scrollLeft=parseInt(l)),o(),window.addEventListener("resize",o),window.addEventListener("beforeunload",(()=>{localStorage.setItem("footerScrollPosition",e.scrollLeft)}))}function VerticalWave(e){new ResizeObserver((function(){const t=e.offsetWidth,c=e.offsetHeight,s=1.1/(160/t),n=1/(800/c);document.documentElement.style.setProperty("--courbure-scaling-x",n),document.documentElement.style.setProperty("--courbure-scaling-y",s)})).observe(e)}function searchBar(e){searchButtons=e.children;const t=searchButtons[0],c=searchButtons[1],s=searchButtons[2],n=document.querySelector("cgs-search > form > input");t.addEventListener("click",(()=>{t.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),n.classList.add("cgs-open"),e.classList.add("cgs-open")})),c.addEventListener("click",(()=>{c.classList.add("cgs-hidden"),s.classList.remove("cgs-hidden"),n.classList.remove("cgs-open"),e.classList.remove("cgs-open")})),s.addEventListener("click",(()=>{s.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),n.classList.add("cgs-open"),e.classList.add("cgs-open")})),n.addEventListener("focus",(()=>{n.classList.add("cgs-open"),t.classList.add("cgs-hidden"),s.classList.add("cgs-hidden"),c.classList.remove("cgs-hidden"),e.classList.add("cgs-open")}))}function searchBlock(e){const t=new URLSearchParams(window.location.search),c=document.getElementById("activeCategory"),s=c.getAttribute("data-name"),n=t.get(s),o=document.querySelectorAll(`input[name="${s}"]`),l=t.getAll("tag"),d=t.get("query"),a=[t.get("start_date"),t.get("end_date")],i=c.getAttribute("data-nom"),r=document.querySelectorAll(".tag-button"),u=document.getElementById("cgs-search-form"),g=document.getElementById("activeTags"),m=document.getElementById("activeQuery"),h=document.getElementById("activeDate");if(o&&o.forEach((e=>{e.addEventListener("change",(function(){f()}))})),r&&r.forEach((e=>{e.addEventListener("click",(function(){p(this.getAttribute("data-tag")),f()}))})),console.log("Category :",n,"Tags :",l,"Query :",d,"Date :",a),n||l.length>0||d||a[0]||a[1]){if(n){const e=document.createElement("div"),t=document.querySelector("#cgs-close svg").cloneNode(!0),s=document.createElement("span");t.id="svg_close_categorie",t.classList.add("cgs-small-icon","cgs-close"),t.onclick=function(){o.forEach((e=>{e.checked=!1})),f()},s.textContent=`${i} : ${n}`,e.appendChild(s),e.appendChild(t),c.appendChild(e)}else{console.log("ELSE");const e=document.createElement("div"),t=document.createElement("span");t.textContent=`${i} : Toutes`,e.appendChild(t),c.appendChild(e)}if(d){const e=document.createElement("div"),t=document.querySelector("#cgs-close svg").cloneNode(!0),c=document.createElement("span");t.id="svg_close_query",t.classList.add("cgs-small-icon","cgs-close"),t.onclick=function(){const e=document.querySelector('input[name="query"]');e.value="",console.log(e.value),f()},c.textContent=`Recherche : ${d}`,e.appendChild(c),e.appendChild(t),m.appendChild(e)}if(l.length>0&&l.forEach((e=>p(e))),a[0]){const e=document.createElement("div"),t=document.createElement("span"),c=document.querySelector("#cgs-close svg").cloneNode(!0);c.id="svg_close_start_date",c.classList.add("cgs-small-icon","cgs-close"),c.onclick=function(){document.querySelector('input[name="start_date"]').value="",f()},t.textContent=`Début : ${a[0]}`,e.appendChild(t),e.appendChild(c),h.appendChild(e)}if(a[1]){const e=document.createElement("div"),t=document.createElement("span"),c=document.querySelector("#cgs-close svg").cloneNode(!0);c.id="svg_close_end_date",c.classList.add("cgs-small-icon","cgs-close"),c.onclick=function(){document.querySelector('input[name="end_date"]').value="",f()},t.textContent=`Fin : ${a[1]}`,e.appendChild(t),e.appendChild(c),h.appendChild(e)}}function p(e){if(![...g.children].some((t=>t.textContent.startsWith(e)))){const t=document.createElement("input");t.type="hidden",t.name="tag",t.value=e,u.appendChild(t);const c=document.createElement("div");c.className="active-tag-div";const s=document.createElement("span");s.textContent=e;const n=document.querySelector("#cgs-close svg").cloneNode(!0);n.id="svg_close_"+e,n.classList.add("cgs-small-icon","cgs-close"),n.onclick=function(){u.removeChild(t),g.removeChild(c),f()},c.appendChild(s),c.appendChild(n),g.appendChild(c)}}function f(){u.submit()}}document.addEventListener("DOMContentLoaded",(function(){console.log("Fichier intranet.js chargé"),whatTheHell()}));