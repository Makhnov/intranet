function listenObjectsChange(e){const t=document.getElementById("object_convocation"),c=document.getElementById("object_divers"),s=document.querySelector("section.left"),o=document.querySelector("section.right"),d=document.querySelector("label[for=object_divers]"),a=document.querySelector("label[for=object_convocation]"),n=document.querySelector("span[for=object_divers]"),l=document.querySelector("span[for=object_convocation]");function i(e){"divers"===e?(s.classList.remove("cgs-pathed"),d.style.display="flex",n.style.transform="scaleX(0)",o.classList.add("cgs-pathed"),a.style.display="none",l.style.transform="scaleX(1)"):"convocation"===e?(s.classList.add("cgs-pathed"),d.style.display="none",n.style.transform="scaleX(1)",o.classList.remove("cgs-pathed"),a.style.display="flex",l.style.transform="scaleX(0)"):(s.classList.add("cgs-pathed"),d.style.display="none",n.style.transform="scaleX(1)",o.classList.add("cgs-pathed"),a.style.display="none",l.style.transform="scaleX(1)")}e.addEventListener("change",(function(e){"radio"===e.target.type&&i(e.target.value)})),n.addEventListener("click",(function(){c.checked=!0,i("divers")})),l.addEventListener("click",(function(){t.checked=!0,i("convocation")})),t.checked?i("convocation"):c.checked?i("divers"):i("none")}function displayForm(){const e=document.querySelectorAll("div.cgs-form-group[data-type=select]"),t=document.querySelectorAll("input[type=radio][data-name=left_pages], input[type=radio][data-name=right_pages], input[type=radio][data-name=commissions]"),c=document.querySelector("div.cgs-form-group[data-type=radio][data-id=commissions]");!function(){e.forEach((e=>{e.classList.add("cgs-hidden")})),c.classList.add("cgs-hidden");let s=[];t.forEach((e=>{if(e.checked){const t=e.closest(".cgs-form-group");t.setAttribute("data-selected",e.value),s.push(t)}})),s.forEach((e=>{const t=e.getAttribute("data-selected");if("commissions"===t){c.classList.remove("cgs-hidden");const e=document.querySelector(`div.cgs-form-group[data-type=select][data-id='${c.getAttribute("data-selected")}']`);e&&e.classList.remove("cgs-hidden")}else{const e=document.querySelector(`div.cgs-form-group[data-type=select][data-id=${t}]`);e&&!e.getAttribute("data-id").includes("commission")&&e.classList.remove("cgs-hidden")}}))}(),t.forEach((e=>{e.addEventListener("change",(function(e){if("radio"===e.target.type){!function(e=null,t=null){if(e){let s=e.getAttribute("data-selected"),o="select",d="select";if("commissions"===t){o="radio";let e=c.getAttribute("data-selected"),t=document.querySelector(`div.cgs-form-group[data-type="select"][data-id="${e}"]`);t&&t.classList.remove("cgs-hidden")}if("commissions"===s){d="radio";let e=c.getAttribute("data-selected");c.setAttribute("data-selected","");let t=c.querySelector(`input[type=radio][data-name=commissions][value="${e}"]`);t&&(t.checked=!1);let s=document.querySelector(`div.cgs-form-group[data-type="select"][data-id="${e}"]`);if(s){s.classList.add("cgs-hidden");let e=s.querySelector("select");if(e){e.selectedIndex=0;let t=new Event("change");e.dispatchEvent(t)}}}const a=document.querySelector(`div.cgs-form-group[data-type="${o}"][data-id="${t}"]`),n=document.querySelector(`div.cgs-form-group[data-type="${d}"][data-id="${s}"]`);if(a&&a.classList.remove("cgs-hidden"),n){n.classList.add("cgs-hidden");let e=n.querySelector("select");if(e){e.selectedIndex=0;let t=new Event("change");e.dispatchEvent(t)}}e.setAttribute("data-selected",t)}else console.log("pas de section")}(e.target.closest(".cgs-form-group "),e.target.value)}}))}))}function getConvocation(){const e=[...document.querySelectorAll("div.cgs-form-group[data-type=select][data-id=conseils] select"),...document.querySelectorAll("div.cgs-form-group[data-type=select][data-id=bureaux] select"),...document.querySelectorAll("div.cgs-form-group[data-type=select][data-id=conferences] select"),...document.querySelectorAll('div.cgs-form-group[data-type=select][data-id*="commission"] select')],t=document.getElementById("pdf-page");e.forEach((e=>{e.addEventListener("change",(function(e){const c=e.target.value;console.log(c),t.value=""===c?null:parseInt(c)}))}))}document.addEventListener("DOMContentLoaded",(function(){console.log("Fichier mailing.js chargÃ©");const e=document.getElementById("objects");e&&listenObjectsChange(e);document.querySelectorAll("form.cgs-mailing").length>0&&displayForm();document.querySelector("form.cgs-generator")&&getConvocation();const t=document.getElementById("open-search-mail"),c=document.getElementById("cgs-search-mail");t&&c&&t.addEventListener("click",(function(){c.classList.toggle("cgs-hidden")}))}));