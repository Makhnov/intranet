function cgsMenu(){console.log("Menu chargé")}function cgsList(){console.log("Liste chargée");function e(){const e=document.querySelectorAll("#emailsContainer .email");console.log(e);const t=Array.from(e).map((e=>e.textContent.trim())).join(", ");navigator.clipboard.writeText(t).then((function(){console.log("Copie réussie")}),(function(e){console.error("Erreur lors de la copie",e)}))}document.getElementById("action-buttons")&&function(){const t=document.getElementById("cgs-copy");document.getElementById("cgs-download"),document.getElementById("cgs-print");t&&t.addEventListener("click",e)}()}function cgsDoc(){console.log("Document chargé")}function cgsViewer(e){const t=e.getAttribute("data-url");if(!t)return void console.error("URL du PDF non définie");console.log("URL du PDF : "+t),console.time("Temps de chargement total");const n=document.querySelector("div.cgs-progress"),o=n.querySelector("p.progress-value");let s=1,c=0;function l(e,t,o,s,l,a){return o.then((()=>e.getPage(t).then((o=>{console.time(`Temps de chargement de la page ${t}`);const a=Math.max(window.devicePixelRatio||1,3),d=o.getViewport({scale:a});let m=document.createElement("canvas");m.id="page-"+t,l.appendChild(m),m.height=d.height,m.width=d.width;const g={canvasContext:m.getContext("2d"),viewport:d};return o.render(g).promise.then((()=>{console.timeEnd(`Temps de chargement de la page ${t}`),c+=s,r(c),t===e.numPages&&(console.log("Progression terminée"),console.timeEnd("Temps de chargement total"),n.style.display="none",i(e.numPages))}))}))))}function r(e){document.documentElement.style.setProperty("--progress",`${e}%`),o.textContent=`${Math.floor(e)}%`}function i(t){const n=document.querySelector("nav.viewer");n.style.display="block";const o=n.querySelector("input");o.max=t;n.querySelector("span.max-page").textContent=t;const c=e.querySelectorAll("canvas"),l=c[0].offsetWidth;let r=l;const i=document.getElementById("first-page"),a=document.getElementById("next-page"),d=document.getElementById("last-page"),m=document.getElementById("prev-page"),g=document.getElementById("zoom-in"),u=document.getElementById("zoom-out"),p=document.getElementById("fullscreen"),h=p.querySelector("button");function y(t){const n=document.getElementById(`page-${t}`);if(n){e.scrollTop;const t=n.offsetTop-e.offsetTop;return n.scrollIntoView({behavior:"smooth",block:"start"}),console.log("Position attendue après défilement : "+t),t}}function f(t){const n=h.querySelector(".expand"),o=h.querySelector(".compress");h.expanded=t,t?(e.style.setProperty("--canvas-max-width","100%"),e.style.setProperty("--canvas-max-height","none"),e.style.setProperty("--canvas-width","initial"),r=l,n.classList.add("cgs-hidden"),o.classList.remove("cgs-hidden"),h.setAttribute("title","Quitter le mode plein écran"),h.setAttribute("alt","Quitter le mode plein écran")):(e.style.setProperty("--canvas-max-width","100%"),e.style.setProperty("--canvas-max-height","calc(100vh - (var(--header-height) + var(--footer-height) + var(--header-padding)))"),e.style.setProperty("--canvas-width","initial"),r=l,n.classList.remove("cgs-hidden"),o.classList.add("cgs-hidden"),h.setAttribute("title","Passer en mode plein écran"),h.setAttribute("alt","Passer en mode plein écran"))}function v(){console.log("currentWidth : "+r),console.log("container width : "+e.offsetWidth),r>e.offsetWidth?(e.style.justifyContent="flex-start",e.style.overflowX="scroll"):(e.style.justifyContent="center",e.style.overflowX="initial"),e.style.setProperty("--canvas-width",`${r}px`),e.style.setProperty("--canvas-max-height","none"),e.style.setProperty("--canvas-max-width","none")}i.addEventListener("click",(()=>{if(1!=s){s=1,o.value=s;const e=y(s);console.log(e)}})),m.addEventListener("click",(()=>{if(s>1){s--,o.value=s;const e=y(s);console.log(e)}})),d.addEventListener("click",(()=>{if(s!=t){s=t,o.value=s;const e=y(s);console.log(e)}})),a.addEventListener("click",(()=>{if(s<t){s++,o.value=s;const e=y(s);console.log(e)}})),o.addEventListener("change",(()=>{const e=parseInt(o.value);if(!isNaN(e)&&e>=1&&e<=o.max){s=e;const t=y(s);console.log(t)}else o.value=s})),p.addEventListener("click",(()=>{h.expanded?f(!1):f(!0)})),g.addEventListener("click",(()=>{r*=1.1,r>c[0].width&&(r=c[0].width),v()})),u.addEventListener("click",(()=>{r*=.9,r<350&&(r=350),v()}))}r(c),pdfjsLib.getDocument(t).promise.then((t=>{console.log("PDF chargé"),console.timeEnd("Temps de chargement du PDF");const n=100/t.numPages;let o=Promise.resolve();console.time("Temps de chargement des premières pages");for(let s=1;s<=3;s++)o=l(t,s,o,n,e,!0);o.then((()=>{console.timeEnd("Temps de chargement des premières pages");for(let s=4;s<=t.numPages;s++)o=l(t,s,o,n,e,!1)}))}),(e=>{console.error(e)}))}document.addEventListener("DOMContentLoaded",(function(){console.log("Page d'administration chargée");const e=document.body?document.body.getAttribute("class"):"";if(console.log(e),e.includes("menu")&&cgsMenu(),e.includes("doc")){cgsDoc();const e=document.getElementById("viewer");e&&cgsViewer(e)}}));