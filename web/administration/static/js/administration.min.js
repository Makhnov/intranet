function cgsMenu(){console.log("Menu chargé")}function cgsList(){console.log("Liste chargée");function e(){const e=document.querySelectorAll("#emailsContainer .email");console.log(e);const t=Array.from(e).map((e=>e.textContent.trim())).join(", ");navigator.clipboard.writeText(t).then((function(){console.log("Copie réussie")}),(function(e){console.error("Erreur lors de la copie",e)}))}document.getElementById("action-buttons")&&function(){const t=document.getElementById("cgs-copy");document.getElementById("cgs-download"),document.getElementById("cgs-print");t&&t.addEventListener("click",e)}()}function cgsDoc(){console.log("Document chargé")}async function cgsViewer(e){console.time("Temps de chargement du PDF"),console.time("Temps de chargement total");const t=isMobileDevice();console.log(t?"Appareil mobile détecté":"Grand écran détecté");const n=e.getAttribute("data-url");if(!n)return void console.error("URL du PDF non définie");console.log("URL du PDF : "+n);const o=document.querySelector("div.cgs-progress"),c=o.querySelector("p.progress-value");let s=0;a(s);try{const t=await pdfjsLib.getDocument(n).promise;console.log("PDF chargé"),console.timeEnd("Temps de chargement du PDF");const c=100/t.numPages;for(let n=1;n<=t.numPages;n++)await r(t,n,c,e);console.log("Toutes les pages sont chargées"),console.timeEnd("Temps de chargement total"),o.style.display="none",function(t){const n=document.querySelector("nav.viewer");n.style.display="block";const o=n.querySelector("input");o.max=t;n.querySelector("span.max-page").textContent=t;const c=e.querySelectorAll("canvas"),s=c[0].offsetWidth;let r=s;const a=document.getElementById("first-page"),i=document.getElementById("next-page"),l=document.getElementById("last-page"),d=document.getElementById("prev-page"),u=document.getElementById("zoom-in"),g=document.getElementById("zoom-out"),m=document.getElementById("fullscreen"),p=m.querySelector("button");function y(t){const n=document.getElementById(`page-${t}`);if(n){e.scrollTop;const t=n.offsetTop-e.offsetTop;return n.scrollIntoView({behavior:"smooth",block:"start"}),console.log("Position attendue après défilement : "+t),t}}function h(t){const n=p.querySelector(".expand"),o=p.querySelector(".compress");p.expanded=t,t?(e.style.setProperty("--canvas-max-width","100%"),e.style.setProperty("--canvas-max-height","none"),e.style.setProperty("--canvas-width","initial"),e.style.justifyContent="center",r=s,n.classList.add("cgs-hidden"),o.classList.remove("cgs-hidden"),p.setAttribute("title","Quitter le mode plein écran"),p.setAttribute("alt","Quitter le mode plein écran")):(e.style.setProperty("--canvas-max-width","100%"),e.style.setProperty("--canvas-max-height","calc(100vh - (var(--header-height) + var(--footer-height) + var(--header-padding)))"),e.style.setProperty("--canvas-width","initial"),e.style.justifyContent="center",r=s,n.classList.remove("cgs-hidden"),o.classList.add("cgs-hidden"),p.setAttribute("title","Passer en mode plein écran"),p.setAttribute("alt","Passer en mode plein écran"))}function v(){console.log("currentWidth : "+r),console.log("container width : "+e.offsetWidth),r>e.offsetWidth?(e.style.justifyContent="flex-start",e.style.overflowX="scroll"):(e.style.justifyContent="center",e.style.overflowX="initial"),e.style.setProperty("--canvas-width",`${r}px`),e.style.setProperty("--canvas-max-height","none"),e.style.setProperty("--canvas-max-width","none")}a.addEventListener("click",(()=>{if(1!=currentPage){currentPage=1,o.value=currentPage;const e=y(currentPage);console.log(e)}})),d.addEventListener("click",(()=>{if(currentPage>1){currentPage--,o.value=currentPage;const e=y(currentPage);console.log(e)}})),l.addEventListener("click",(()=>{if(currentPage!=t){currentPage=t,o.value=currentPage;const e=y(currentPage);console.log(e)}})),i.addEventListener("click",(()=>{if(currentPage<t){currentPage++,o.value=currentPage;const e=y(currentPage);console.log(e)}})),o.addEventListener("change",(()=>{const e=parseInt(o.value);if(!isNaN(e)&&e>=1&&e<=o.max){currentPage=e;const t=y(currentPage);console.log(t)}else o.value=currentPage})),m.addEventListener("click",(()=>{p.expanded?h(!1):h(!0)})),u.addEventListener("click",(()=>{r*=1.1,r>c[0].width&&(r=c[0].width),v(r)})),g.addEventListener("click",(()=>{r*=.9,r<350&&(r=350),v(r)}))}(t.numPages)}catch(e){console.error(e)}async function r(e,n,o,c){const r=await e.getPage(n);console.time(`Temps de chargement de la page ${n}`);const i=t?window.devicePixelRatio:Math.max(window.devicePixelRatio||1,3),l=r.getViewport({scale:i});let d=document.createElement("canvas");d.id="page-"+n,c.appendChild(d),d.height=l.height,d.width=l.width;const u={canvasContext:d.getContext("2d"),viewport:l};await r.render(u).promise,console.timeEnd(`Temps de chargement de la page ${n}`),s+=o,a(s)}function a(e){document.documentElement.style.setProperty("--progress",`${e}%`),c.textContent=`${Math.floor(e)}%`}}function isMobileDevice(){return/Mobi/i.test(navigator.userAgent)}document.addEventListener("DOMContentLoaded",(function(){console.log("Page d'administration chargée");const e=document.body?document.body.getAttribute("class"):"";if(console.log(e),e.includes("menu")&&cgsMenu(),e.includes("doc")){cgsDoc();const e=document.getElementById("viewer");e&&cgsViewer(e)}}));